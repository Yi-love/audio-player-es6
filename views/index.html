<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title><%=title%></title>
</head>
<body>
	<h1>播放器</h1>
	<div id="player">
		<p id="current">无音乐播放</p>
	</div>
	<div class="">
		<button id="play">播放</button>
		<button id="pause">暂停</button>
		<button id="pre">上一首</button>
		<button id="next">下一首</button>
		<button id="auto">自动播放</button>
		<input type="range" id="volume" min="0" max="1" defaultValue="0" name="range" step="0.1">
		<select name="" id="mode">
			<option value="0">单曲循环</option>
			<option value="1" selected="selected">顺序播放</option>
			<option value="2">列表循环</option>
			<option value="3">随机播放</option>
		</select>
	</div>
	<script src="/script/index.js"></script>
	<script>
		var audio = new Player();
		audio.src(['/music/1.mp3','/music/2.mp3','/music/5.mp3','/music/4.mp3'])
		.src('hjk.mpg').src('/music/3.mp3').src('/music/4.mp3')
		.setCallBack({
			loading: function(state , player){
				console.log(state);
				document.getElementById('current').innerHTML = player.audioList[player.audioCurrentIndex]
			},
			playing:function(state , player){
				console.log(state, player.audioCurrentIndex , player.audioList[player.audioCurrentIndex])
			},
			end:function(state , player ){
				console.log(state)
			},
			abort: function(state , player){
				console.log(state , player.lastPlayIndex , player.audioList[player.lastPlayIndex])
			}
		}).play();

		function $(name){
			return document.querySelector(name)
		}

		$('#play').onclick = function(e){
			audio.play()
		};
		$('#pause').onclick = function(e){
			audio.pause()
		};
		$('#pre').onclick = function(e){
			audio.pre()
		};
		$('#next').onclick = function(e){
			audio.next()
		};
		$('#auto').onclick = function(e){
			audio.setAuto(true)
		};
		$('#volume').onchange = function(){
			audio.setVolume(+$('#volume').value)
		}
		$('#mode').onchange = function(){
			audio.setMode(+$('#mode').value)
		}
		window._audio = audio;
	</script>
</body>
</html>